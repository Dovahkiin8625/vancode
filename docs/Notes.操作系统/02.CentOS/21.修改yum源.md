---
title: 修改yum源
date: 2022-02-09 15:11:16
permalink: /pages/9fac8fba4a7199b9
categories:
  - 操作系统
  - CentOS
tags:
  - 操作系统
  - CentOS
author:
  name: Vance L
  link: https://github.com/Dovahkiin8625
---





# 修改yum源

## 简介

CentOS，是基于 Red Hat Linux 提供的可自由使用源代码的企业级 Linux 发行版本；是一个稳定，可预测，可管理和可复制的免费企业级计算平台。

下载地址: [https://mirrors.aliyun.com/centos/](https://mirrors.aliyun.com/centos/?spm=a2c6h.13651104.0.0.60f112b2Jkwd0w)  [https://mirrors.aliyun.com/centos-vault/](https://mirrors.aliyun.com/centos-vault/)

## 配置方法

### 1. 备份

```shell
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
```

### 2. 下载新的 CentOS-Base.repo 到 /etc/yum.repos.d/

**CentOS 6**

```shell
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-6.repo
```

或者

```shell
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-6.repo
```

**CentOS 7**

```shell
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
```

或者

```shell
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
```

##### centos8（centos8官方源已下线，建议切换centos-vault源）

```shell
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo
```

或者

```shell
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo
```

### 3. 运行 yum makecache 生成缓存

### 4. 其他

非阿里云ECS用户会出现 Couldn't resolve host 'mirrors.cloud.aliyuncs.com' 信息，不影响使用。用户也可自行修改相关配置: eg:

```shell
sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Ba
```

## 问题

### 1 OptionBinding with id "failovermethod" does not exist   错误

```shell
Invalid configuration value: failovermethod=priority in /etc/yum.repos.d/CentOS-Linux-epel.repo; Configuration: OptionBinding with id "failovermethod" does not exist 
```

原因是Redhat的dnf 不支持`failovermethod` 选项  所以需要将此选项注释掉或是删除

```shell
vim /etc/yum.repos.d/redhat.repo
```

### 2 换源一直出现问题

换源一直出现问题，折腾好一会都不行，一怒之下直接在`yum.repos.d`目录下执行`rm -f *` 删除了所有的`repo`，然后按之前的配置方法，问题解决。